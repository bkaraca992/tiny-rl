name: CI

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: 3.10
      - name: Install deps
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt
      - name: Smoke test: import and run tiny train for 1 episode
        run: |
          python - <<'PY'
from src.train import train
from envs.gridworld import GridWorld
from agents.q_learning import QLearningAgent
env = GridWorld(width=4, height=4, max_steps=10)
agent = QLearningAgent(n_states=env.n_states, n_actions=env.n_actions, epsilon=0.0)
rewards = train(env, agent, episodes=1, max_steps_per_episode=10)
print("smoke done", rewards[0])
PY
